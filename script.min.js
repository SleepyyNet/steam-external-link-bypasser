/*! Steam External Link Bypasser v0.0.1, Tue, 22 Jul 2014 06:24:59 GMT, https://github.com/cletusc/steam-external-link-bypasser */
!function(t){"use strict";function e(t){d[t]=!0,o(u.name+":bypassedHosts",JSON.stringify(d))}function n(t){delete d[t],o(u.name+":bypassedHosts",JSON.stringify(d))}function s(t){return d[t]===!0}function a(e){t.location.href=e}function i(t){var e=document.createElement("style");e.textContent=t,document.querySelector("head").appendChild(e)}function r(t,e){var n=localStorage.getItem(t);return null===n&&"undefined"!=typeof e?e:n}function o(t,e){localStorage.setItem(t,e)}var u={name:"steam-external-link-bypasser",version:"0.0.1",homepage:"https://github.com/cletusc/steam-external-link-bypasser",bugs:"https://github.com/cletusc/steam-external-link-bypasser/issues",author:"Ryan Chatham <ryan.b.chatham@gmail.com> (https://github.com/cletusc)",repository:{type:"git",url:"https://github.com/cletusc/steam-external-link-bypasser.git"},userscript:{name:"Steam External Link Bypasser",namespace:"https://github.com/cletusc",version:"{{{pkg.version}}}",description:"Adds ability to bypass certain hosts on the Steam external site warning page.",copyright:"2014+, {{{pkg.author}}}",author:"{{{pkg.author}}}",icon:"http://www.gravatar.com/avatar.php?gravatar_id=6875e83aa6c563790cb2da914aaba8b3&r=PG&s=48&default=identicon",license:"MIT; https://github.com/cletusc/steam-external-link-bypasser/blob/master/LICENSE",homepage:"{{{pkg.homepage}}}",supportURL:"{{{pkg.bugs}}}",grant:"none",include:"https://steamcommunity.com/linkfilter/?url=*"},devDependencies:{gulp:"^3.8.3","hogan.js":"^3.0.2","gulp-concat":"^2.2.0","gulp-conflict":"^0.1.2","gulp-css-base64":"^1.1.0","gulp-minify-css":"^0.3.5","gulp-header":"^1.0.2","gulp-hogan-compile":"^0.2.1","vinyl-map":"^1.0.1","gulp-rename":"^1.2.0","gulp-uglify":"^0.3.1"}},l=null,c=null;l=c=t.jQuery;var p={};!function(t){function e(t,e,n){var s;return e&&"object"==typeof e&&(void 0!==e[t]?s=e[t]:n&&e.get&&"function"==typeof e.get&&(s=e.get(t))),s}function n(t,e,n,s,a,i){function r(){}function o(){}r.prototype=t,o.prototype=t.subs;var u,l=new r;l.subs=new o,l.subsText={},l.buf="",s=s||{},l.stackSubs=s,l.subsText=i;for(u in e)s[u]||(s[u]=e[u]);for(u in s)l.subs[u]=s[u];a=a||{},l.stackPartials=a;for(u in n)a[u]||(a[u]=n[u]);for(u in a)l.partials[u]=a[u];return l}function s(t){return String(null===t||void 0===t?"":t)}function a(t){return t=s(t),c.test(t)?t.replace(i,"&amp;").replace(r,"&lt;").replace(o,"&gt;").replace(u,"&#39;").replace(l,"&quot;"):t}t.Template=function(t,e,n,s){t=t||{},this.r=t.code||this.r,this.c=n,this.options=s||{},this.text=e||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(){return""},v:a,t:s,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},ep:function(t,e){var s=this.partials[t],a=e[s.name];if(s.instance&&s.base==a)return s.instance;if("string"==typeof a){if(!this.c)throw new Error("No compiler available.");a=this.c.compile(a,this.options)}if(!a)return null;if(this.partials[t].base=a,s.subs){e.stackText||(e.stackText={});for(key in s.subs)e.stackText[key]||(e.stackText[key]=void 0!==this.activeSub&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text);a=n(a,s.subs,s.partials,this.stackSubs,this.stackPartials,e.stackText)}return this.partials[t].instance=a,a},rp:function(t,e,n,s){var a=this.ep(t,n);return a?a.ri(e,n,s):""},rs:function(t,e,n){var s=t[t.length-1];if(!p(s))return void n(t,e,this);for(var a=0;a<s.length;a++)t.push(s[a]),n(t,e,this),t.pop()},s:function(t,e,n,s,a,i,r){var o;return p(t)&&0===t.length?!1:("function"==typeof t&&(t=this.ms(t,e,n,s,a,i,r)),o=!!t,!s&&o&&e&&e.push("object"==typeof t?t:e[e.length-1]),o)},d:function(t,n,s,a){var i,r=t.split("."),o=this.f(r[0],n,s,a),u=this.options.modelGet,l=null;if("."===t&&p(n[n.length-2]))o=n[n.length-1];else for(var c=1;c<r.length;c++)i=e(r[c],o,u),void 0!==i?(l=o,o=i):o="";return a&&!o?!1:(a||"function"!=typeof o||(n.push(l),o=this.mv(o,n,s),n.pop()),o)},f:function(t,n,s,a){for(var i=!1,r=null,o=!1,u=this.options.modelGet,l=n.length-1;l>=0;l--)if(r=n[l],i=e(t,r,u),void 0!==i){o=!0;break}return o?(a||"function"!=typeof i||(i=this.mv(i,n,s)),i):a?!1:""},ls:function(t,e,n,a,i){var r=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(s(t.call(e,a)),e,n)),this.options.delimiters=r,!1},ct:function(t,e,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(e,n)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,e,n,s,a,i,r){var o,u=e[e.length-1],l=t.call(u);return"function"==typeof l?s?!0:(o=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(l,u,n,o.substring(a,i),r)):l},mv:function(t,e,n){var a=e[e.length-1],i=t.call(a);return"function"==typeof i?this.ct(s(i.call(a)),a,n):i},sub:function(t,e,n,s){var a=this.subs[t];a&&(this.activeSub=t,a(e,n,this,s),this.activeSub=!1)}};var i=/&/g,r=/</g,o=/>/g,u=/\'/g,l=/\"/g,c=/[&<>\"\']/,p=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}("undefined"!=typeof exports?exports:p);var h=function(){function t(t){return t=e[t],function(n,s,a){return t.render(n,s||e,a)}}var e={};e.button=new p.Template({code:function(t,e,n){var s=this;return s.b(n=n||""),s.b('<a id="steam-external-link-bypasser-bypass-host" href="'),s.b(s.t(s.f("url",t,e,0))),s.b('" class="btn_grey_white_innerfade btn_medium">\r'),s.b("\n"+n),s.b("	<span>Always bypass "),s.b(s.v(s.f("host",t,e,0))),s.b("</span>\r"),s.b("\n"+n),s.b("</a>\r"),s.b("\n"),s.fl()},partials:{},subs:{}}),e.manager=new p.Template({code:function(t,e,n){var s=this;return s.b(n=n||""),s.b('<div class="steam-external-link-bypasser-manager">\r'),s.b("\n"+n),s.b("	<h1>Steam External Link Bypasser: Manager</h1>\r"),s.b("\n"+n),s.b('	<p>You are able to manage previously bypassed hosts here. Click on a host to not bypass it anymore. You can learn more about this script at the <a href="'),s.b(s.t(s.d("pkg.homepage",t,e,0))),s.b('">the script homepage</a>.</p>\r'),s.b("\n"+n),s.s(s.f("hosts",t,e,1),t,e,0,316,415,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('		<a class="remove-host" data-host="'),s.b(s.t(s.f("host",t,e,0))),s.b('"><span class="close">&times;</span>'),s.b(s.v(s.f("host",t,e,0))),s.b("</a>\r"),s.b("\n"+n)}),t.pop()),s.b("</div>\r"),s.b("\n"),s.fl()},partials:{},subs:{}}),e.styles=new p.Template({code:function(t,e,n){var s=this;return s.b(n=n||""),s.b("/**"),s.b("\n"+n),s.b(" * Minified file. Third-party version information can be found in /package.json."),s.b("\n"+n),s.b(" * Original filename: \\src\\styles\\style.css"),s.b("\n"+n),s.b(" */"),s.b("\n"+n),s.b("#steam-external-link-bypasser-bypass-host{margin-top:10px}.steam-external-link-bypasser-manager{padding-top:50px;font-size:150%}.steam-external-link-bypasser-manager .remove-host{display:block;text-decoration:none!important;width:300px;text-align:left;margin:0 auto}.steam-external-link-bypasser-manager .close{color:#a00;margin-right:20px}"),s.fl()},partials:{},subs:{}});var n={},s=null;for(s in e)e.hasOwnProperty(s)&&(n[s]=t(s));return n}(),b=null,f=null,m=l("#proceedButton").get(0),g=null,d=JSON.parse(r(u.name+":bypassedHosts","{}")),y=null,v=null;return t.bypassedHosts=d,f=m.href,b=m.host,i(h.styles()),f===u.homepage+"/manager"&&(l(document.body).html(""),v=Object.keys(d),v.sort(),y=l(h.manager({hosts:v.map(function(t){return{host:t}}),pkg:u})).appendTo(document.body),y.on("click",".remove-host",function(){var t=l(this),e=t.attr("data-host");n(e),t.remove()})),s(b)?a(f):(g=l(h.button({host:b,url:f})).appendTo("#warningActions"),void g.on("click",function(){e(b)}))}(window);